__author__ = 'gram'from engine import set_debug, place_objects, add_location, add_route, set_location, add_object, replay, set_goalfrom engine import game_action, conditional_game_action, have, add_commands, run_game, end_game, enable_routedebug = False # Set to true to skip having to get the bucket and chain etcchain_welded = debugbucket_filled = debuggate_unlocked = debugkey_dropped = Falseset_debug(debug)add_location('bedroom',    'you are in the bedroom of a wizards house - there is a wizard snoring loudly on the bed.')add_location('garden',    'you are in a beautiful garden - there is a well in front of you.')add_location('attic',    'you are in the attic of the wizards house - there is a giant welding torch in the corner.')add_location('forest',             'you are in the middle of the deep woods. only a few rays of sunlight reach the ground from here. The porch of the wizard\'s house is to your right.')add_route('bedroom', 'west', 'door', 'garden', True)add_route('bedroom', 'upstairs', 'stairway', 'attic', True)add_route('garden', 'east', 'door', 'bedroom', True)add_route('attic', 'downstairs', 'stairway', 'bedroom', True)add_route('garden', 'outside', 'gate', 'forest', False)add_route('forest', 'inside', 'gate', 'garden', True)# Locations of the objects.place_objects({ 'bottle': 'bedroom', 'bucket' : 'bedroom', 'chain' : 'garden', 'frog' : 'garden', 'cake': 'forest' })set_location('bedroom')# Current location if the player.location = 'bedroom'def weld(args):    global chain_welded    chain_welded = game_action('weld', 'bucket', 'chain', 'attic', True,                               chain_welded,                               'The chain is now securely welded to the bucket',                               args)def dunk(args):    global bucket_filled    bucket_filled = conditional_game_action('dunk', 'well', 'bucket', 'garden',                                            False,                                            bucket_filled, chain_welded,                                            'The bucket is now full of water',                                            'The water is too low to reach.',                                            args)def splash(args):    if conditional_game_action('splash', 'wizard', 'bucket', 'bedroom',                                False, False, bucket_filled,                                'The wizard awakens from his slumber',                                'You don\'t have a bucket of water',                               args):        if have('frog'):            print 'He see you that you stole his frog. He is so upset he banishes you to the netherworld. You lose!'            end_game()        else:            print 'He greets you warmly and drops a key. But he is confused why you woke him. What now?'            add_object('key', 'bedroom')def hit(args):    if game_action('hit', 'wizard', 'bucket' , 'bedroom', False, False,                   'The wizard awakens angrily and turns you into a toad. You lose.',                   args):        end_game()def unlock(args):    global gate_unlocked    gate_unlocked = conditional_game_action('unlock', 'gate', 'key', 'garden', False, gate_unlocked, True,                               'You unlock the gate! It\'s very dark outside...',                               'The gate is locked! You need a key to get in!',                               args)    if gate_unlocked:        enable_route('garden', 'outside')# This part is responsible for reading commands and converting them to Python calls# It maps verbs to handlers. Later we may want to add conditions too, as# well as number of argumentsadd_commands({    'splash': splash,    'pour': splash,    'empty': splash,    'dunk': dunk,    'fill': dunk,    'lower': dunk,    'weld': weld,    'join': weld,    'attach': weld,    'hit': hit,    'unlock': unlock,    'unlatch': unlock})set_goal('cake', 'YES! CAKE! YOU WIN THE GAME 100000000 TIMES!!!')#run_game()replay([    'go west',    'unlock gate',    'unlock gate with key',    'get chain',    'go east',    'get bucket',    'go upstairs',    'weld chain to bucket',    'go downstairs',    'go west',    'dunk bucket in well',    'go east',    'splash wizard with bucket',    'get key',    'go west',    'unlock gate with key',    'go outside',    'get cake'])